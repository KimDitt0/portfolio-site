<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Blue Archive Style Adventure</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(135deg, #0d1b2a, #1b263b);
  color: #fff;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.game-container {
  background: rgba(20, 30, 50, 0.95);
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
  padding: 20px;
  width: 600px;
  max-width: 90%;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.message {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 10px;
}

.message img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
}

.bubble {
  background: #1b2a41;
  padding: 10px 15px;
  border-radius: 15px;
  max-width: 80%;
  animation: fadeIn 0.3s ease;
}

.choices {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}

.choices button {
  background: #4a90e2;
  border: none;
  border-radius: 8px;
  padding: 10px 15px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
}

.choices button:hover {
  background: #357ab7;
  transform: translateY(-2px);
}

#startBGM {
  background: #357ab7;
  border: none;
  border-radius: 8px;
  padding: 10px 15px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  margin-bottom: 10px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<div class="game-container">
  <button id="startBGM">게임 시작</button>
  <div class="messages" id="messages"></div>
  <div class="choices" id="choices"></div>
</div>

<audio id="bgm" src="audio/bgm.mp3" loop></audio>

<script>
const messages = document.getElementById("messages");
const choices = document.getElementById("choices");
const bgm = document.getElementById("bgm");

// 캐릭터 이미지
const characters = {
  player: "images/player.png",
  npc: "images/npc.png"
};

// 효과음 재생
function playSFX(url){
  const sfx = new Audio(url);
  sfx.play();
}

// 메시지 출력
function writeMessage(text, speaker="npc"){
  const msgDiv = document.createElement("div");
  msgDiv.className = "message";

  const img = document.createElement("img");
  img.src = characters[speaker];

  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.innerText = text;

  if(speaker === "player"){
    msgDiv.style.flexDirection = "row-reverse";
  }

  msgDiv.appendChild(img);
  msgDiv.appendChild(bubble);
  messages.appendChild(msgDiv);
  messages.scrollTop = messages.scrollHeight;
}

// 선택지 표시
function setChoices(options){
  choices.innerHTML = "";
  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.innerText = opt.text;
    btn.onclick = () => {
      playSFX('audio/click.mp3');
      opt.action();
    };
    choices.appendChild(btn);
  });
}

// 게임 로직
function startGame(){
  writeMessage("당신은 포트폴리오의 세계에 들어왔습니다.", "npc");
  setChoices([
    { text: "작업물 보기", action: () => {
        writeMessage("여기서 제 포트폴리오 문서를 확인할 수 있습니다.", "player");
        setChoices([{ text: "뒤로가기", action: startGame }]);
    }},
    { text: "기획자로서의 이야기 듣기", action: () => {
        writeMessage("저는 수집형 RPG QA 경험과 기획 역량을 바탕으로 새로운 도전을 하고 있습니다.", "player");
        setChoices([{ text: "뒤로가기", action: startGame }]);
    }}
  ]);
}

// BGM 시작 버튼 클릭 시 게임 시작
document.getElementById("startBGM").onclick = () => {
  bgm.play();
  startGame();
  document.getElementById("startBGM").style.display = "none";
};
</script>

</body>
</html>
